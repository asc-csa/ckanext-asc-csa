{% extends "package/base.html" %}


{% block content %}
  <section class="module">
    <div class = "row wrapper">
    <div class="module-content" style="width: 1200px; margin: auto">
      {% block toolbar %}
        <div class="toolbar">
          {% block breadcrumb %}
            {# {% if self.breadcrumb_content() | trim %} #}
              <ol class="breadcrumb">
                {% snippet 'snippets/home_breadcrumb_item.html' %}
              </ol>
            {# {% endif %} #}
          {% endblock %}
        </div>
      {% endblock %}

      {%if h.lang()=='en'%}
      <div id='content'>
        <h1> API guide </h1>

        <h2>
          This page provides a brief explanation of how to use the API (application programming interface) to access and download data from this website.
        </h2>

        <p>
          The Canadian Space Agency uses an open-source data management system called CKAN (Comprehensive Knowledge Archive Network) to manage this website and
          its datasets. Since CKAN is widely used, there are many resources and scripts online that show how to use its API. The script below is an example of this,
          written in Python.
        </p>
      </div>

      <script src="https://emgithub.com/embed.js?target=https%3A%2F%2Fgithub.com%2Fasc-csa%2Fckanext-asc-csa%2Fblob%2Fmaster%2FHarvester_example.py&style=github&showBorder=on&showLineNumbers=on&showFileMeta=on"></script>
      <noscript>
        Your browser does not support JavaScript. <a href = "https://github.com/asc-csa/ckanext-asc-csa/blob/master/Harvester_example.py"> You can view this script on CSA's GitHub page</a>
      </noscript>
      <script>
        // jQuery(document).ready(function(){
        //   jQuery('.emgithub-container').attr('role', 'presentation')
        // });
        var myVar = setTimeout(tableRole, 3000);

        function tableRole() {
          console.log('table role');
          if(document.querySelector(".emgithub-container table")){
            console.log('found table');
            document.querySelector(".emgithub-container table").setAttribute("role", "presentation");  
          }
        }

        function myStopTableRole() {
          clearTimeout(myVar);
        }
      </script>

          <h3>Additional resources for the CKAN API:</h3>
          <ul>
            <li><a href="https://docs.ckan.org/en/2.9/api/">CKAN API documentation </a></li>

            <li><a href="https://github.com/ckan/ckanapi">CKAN API GitHub page</a></li>

          </ul>
          </div>
          </div>
      </section>




      {%else%}
                  <h1> Guide de l'API </h1>
                  <h2>
                    Cette page vous permettra de vous familiariser avec l'API (interface de protocole d'application) en fournissant une explication rapide de celui-ci ainsi qu'un exemple permettant d'accéder aux données de
                    ce site web et de les télécharger.
                  </h2>

                  <p>
                    L’agence spatiale canadienne utilise un système de gestion des données à code source ouvert appelé CKAN (« Comprehensive Knowledge Archive Network »)
                    pour gérer ce site web et ses ensembles de données. Puisque celui-ci est largement utilisé, il existe de nombreuses ressources et scripts en ligne qui
                    montrent comment utiliser son API. Un exemple, écrit en Python, vous est fourni ci-dessous :
                  </p>

                  <script src="https://emgithub.com/embed.js?target=https%3A%2F%2Fgithub.com%2Fasc-csa%2Fckanext-asc-csa%2Fblob%2Fmaster%2FHarvester_example.py&style=github&showBorder=on&showLineNumbers=on&showFileMeta=on"></script>
                  <noscript>
                    Votre navigateur ne supporte pas JavaScript. <a href = "https://github.com/asc-csa/ckanext-asc-csa/blob/master/Harvester_example.py"> Vous pouvez consulter ce script sur la page GitHub de l'ASC.</a>
                  </noscript>


                <h3>D'autres ressources disponibles pour l'API de CKAN :</h3>
                <ul>
                  <li><a href="https://docs.ckan.org/en/2.8/api/">Documentation de l'API de CKAN (anglais seulement)</a></li>

                  <li><a href="https://github.com/ckan/ckanapi"> Page GitHub de l'API de CKAN (anglais seulement)</a></li>



                </ul>
                </div>
                </div>
            </section>

          {%endif%}
          {% endblock %}
